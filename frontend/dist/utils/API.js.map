{"version":3,"sources":["../../src/utils/API.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {\r\n  BASE_URL_HOTEL,\r\n  BASE_URL_TICKET,\r\n  BASE_URL_LOGIN,\r\n  BASE_URL_USER,\r\n} from \"../config\";\r\n\r\nexport class API {\r\n  static async fetchById(id) {\r\n    const response = await axios.get(`${BASE_URL_HOTEL}/this/${id}`);\r\n    return response.data;\r\n  }\r\n\r\n  static async fetchAllHotel() {\r\n    const response = await axios.get(`${BASE_URL_HOTEL}/read`);\r\n    return response.data;\r\n  }\r\n\r\n  static async userById(id) {\r\n    const response = await axios.get(`${BASE_URL_USER}/readById/${id}`);\r\n    return response.data;\r\n  }\r\n\r\n  //TICKET\r\n\r\n  static async createTicket(idHotel, startDate, endDate) {\r\n    const token = localStorage.getItem(\"token\");\r\n    let test\r\n    const info = {\r\n      idHotel: idHotel,\r\n      dateStart: startDate,\r\n      dateEnd: endDate,\r\n    };\r\n      await fetch(`${BASE_URL_TICKET}/create`, {\r\n        method: \"POST\",\r\n        body: JSON.stringify(info),\r\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\"},\r\n      })\r\n      \r\n      .then((responseJson) => {\r\n        test = responseJson\r\n      })\r\n      .catch(err => {\r\n        console.log('caught it!',err);\r\n     });\r\n     if (test.ok){\r\n      return test\r\n     }\r\n     else {\r\n      await test.text().then(text => test = text)\r\n      return test\r\n     }\r\n  }\r\n\r\n  static async fetchTickets() {\r\n    const token = localStorage.getItem(\"token\");\r\n    try {\r\n      const response = await fetch(`${BASE_URL_TICKET}/myTickets`, {\r\n        method: \"GET\",\r\n        headers: { Authorization: `Bearer ${token}`, \"Content-Type\": \"application/json\"},\r\n      });\r\n      var tickets = await response.json()\r\n      return tickets\r\n      \r\n    } catch (error) {\r\n      console.log(error.response);\r\n      return error.response;\r\n    }\r\n  }\r\n\r\n  static async deleteHotel(hotel) {\r\n    const token = localStorage.getItem(\"token\");\r\n    var vid = { hotel: hotel };\r\n    const response = await fetch(`${BASE_URL_HOTEL}/delete/${hotel.id}`, {\r\n      method: \"DELETE\",\r\n      body: JSON.stringify(vid),\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    });\r\n\r\n    return response.data;\r\n  }\r\n\r\n  static async deleteTicket(id) {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await fetch(`${BASE_URL_TICKET}/delete/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n\r\n    return response.data;\r\n  }\r\n\r\n  //CONNEXION\r\n  static async login(pseudo, password) {\r\n    try {\r\n      const response = await axios.post(`${BASE_URL_LOGIN}`, {\r\n        pseudo: pseudo,\r\n        password: password,\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      return error.response.data;\r\n    }\r\n  }\r\n//a\r\n  static async register(pseudo, email, password) {\r\n    console.log(pseudo + \" \" + email + \" \" + password);\r\n    try {\r\n      await axios.post(`${BASE_URL_USER}/create`, {\r\n        email: email,\r\n        pseudo: pseudo,\r\n        password: password,\r\n      });\r\n    } catch (error) {\r\n      console.log(error.response);\r\n      return error.response;\r\n    }\r\n  }\r\n\r\n  static async deleteUser(id) {\r\n    const token = localStorage.getItem(\"token\");\r\n    const response = await fetch(`${BASE_URL_USER}/delete/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: { Authorization: `Bearer ${token}` },\r\n    });\r\n    return response.data;\r\n  }\r\n\r\n  //USER\r\n  static async updateUser(user) {\r\n    const token = localStorage.getItem(\"token\");\r\n    let test;\r\n\r\n    await fetch(`${BASE_URL_USER}/update`, {\r\n      method: \"PATCH\",\r\n      body: JSON.stringify(user),\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }).then((responseJson) => {\r\n      test = responseJson;\r\n    });\r\n    return test;\r\n  }\r\n}\r\n"],"names":["axios","BASE_URL_HOTEL","BASE_URL_TICKET","BASE_URL_LOGIN","BASE_URL_USER","API","fetchById","id","response","get","data","fetchAllHotel","userById","createTicket","idHotel","startDate","endDate","token","test","info","localStorage","getItem","dateStart","dateEnd","fetch","method","body","JSON","stringify","headers","Authorization","then","responseJson","catch","err","console","log","ok","text","fetchTickets","tickets","error","json","deleteHotel","hotel","vid","deleteTicket","login","pseudo","password","post","register","email","deleteUser","updateUser","user"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,WAAW,QAAQ;AAC1B,SACEC,cAAc,EACdC,eAAe,EACfC,cAAc,EACdC,aAAa,QACR,YAAY;AAEnB,OAAO,IAAA,AAAMC,oBAAD,AAAL;;aAAMA;gCAAAA;;kBAAAA;;YACEC,KAAAA;mBAAb,SAAaA,UAAUC,EAAE;uBAAzB,oBAAA;wBACQC;;;;gCAAW;;oCAAMR,MAAMS,GAAG,CAAC,AAAC,GAAyBF,OAAvBN,gBAAe,UAAW,OAAHM;;;gCAArDC,WAAW;gCACjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAEaC,KAAAA;mBAAb,SAAaA;uBAAb,oBAAA;wBACQH;;;;gCAAW;;oCAAMR,MAAMS,GAAG,CAAC,AAAC,GAAiB,OAAfR,gBAAe;;;gCAA7CO,WAAW;gCACjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAEaE,KAAAA;mBAAb,SAAaA,SAASL,EAAE;uBAAxB,oBAAA;wBACQC;;;;gCAAW;;oCAAMR,MAAMS,GAAG,CAAC,AAAC,GAA4BF,OAA1BH,eAAc,cAAe,OAAHG;;;gCAAxDC,WAAW;gCACjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAIaG,KAAAA;mBAAb,AAFA,QAAQ;YAER,SAAaA,aAAaC,OAAO,EAAEC,SAAS,EAAEC,OAAO;uBAArD,oBAAA;wBACQC,OACFC,MACEC;;;;gCAFAF,QAAQG,aAAaC,OAAO,CAAC;gCAE7BF,OAAO;oCACXL,SAASA;oCACTQ,WAAWP;oCACXQ,SAASP;gCACX;gCACE;;oCAAMQ,MAAM,AAAC,GAAkB,OAAhBtB,iBAAgB,YAAU;wCACvCuB,QAAQ;wCACRC,MAAMC,KAAKC,SAAS,CAACT;wCACrBU,SAAS;4CAAEC,eAAe,AAAC,UAAe,OAANb;4CAAS,gBAAgB;wCAAkB;oCACjF,GAECc,IAAI,CAAC,SAACC;wCACLd,OAAOc;oCACT,GACCC,KAAK,CAACC,SAAAA;wCACLC,QAAQC,GAAG,CAAC,cAAaF;oCAC5B;;;gCAXC;qCAYGhB,KAAKmB,EAAE,EAAPnB;;;;gCACH;;oCAAOA;;;gCAGP;;oCAAMA,KAAKoB,IAAI,GAAGP,IAAI,CAACO,SAAAA;+CAAQpB,OAAOoB;;;;gCAAtC;gCACA;;oCAAOpB;;;;;;;;gBAEX;;;;YAEaqB,KAAAA;mBAAb,SAAaA;uBAAb,oBAAA;wBACQtB,OAEET,UAIFgC,SAGGC;;;;gCATHxB,QAAQG,aAAaC,OAAO,CAAC;;;;;;;;;gCAEhB;;oCAAMG,MAAM,AAAC,GAAkB,OAAhBtB,iBAAgB,eAAa;wCAC3DuB,QAAQ;wCACRI,SAAS;4CAAEC,eAAe,AAAC,UAAe,OAANb;4CAAS,gBAAgB;wCAAkB;oCACjF;;;gCAHMT,WAAW;gCAIH;;oCAAMA,SAASkC,IAAI;;;gCAA7BF,UAAU;gCACd;;oCAAOA;;;gCAEAC;gCACPN,QAAQC,GAAG,CAACK,MAAMjC,QAAQ;gCAC1B;;oCAAOiC,MAAMjC,QAAQ;;;;;;;;gBAEzB;;;;YAEamC,KAAAA;mBAAb,SAAaA,YAAYC,KAAK;uBAA9B,oBAAA;wBACQ3B,OACF4B,KACErC;;;;gCAFAS,QAAQG,aAAaC,OAAO,CAAC;gCAC/BwB,MAAM;oCAAED,OAAOA;gCAAM;gCACR;;oCAAMpB,MAAM,AAAC,GAA2BoB,OAAzB3C,gBAAe,YAAmB,OAAT2C,MAAMrC,EAAE,GAAI;wCACnEkB,QAAQ;wCACRC,MAAMC,KAAKC,SAAS,CAACiB;wCACrBhB,SAAS;4CACPC,eAAe,AAAC,UAAe,OAANb;4CACzB,gBAAgB;wCAClB;oCACF;;;gCAPMT,WAAW;gCASjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAEaoC,KAAAA;mBAAb,SAAaA,aAAavC,EAAE;uBAA5B,oBAAA;wBACQU,OACAT;;;;gCADAS,QAAQG,aAAaC,OAAO,CAAC;gCAClB;;oCAAMG,MAAM,AAAC,GAA4BjB,OAA1BL,iBAAgB,YAAa,OAAHK,KAAM;wCAC9DkB,QAAQ;wCACRI,SAAS;4CAAEC,eAAe,AAAC,UAAe,OAANb;wCAAQ;oCAC9C;;;gCAHMT,WAAW;gCAKjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAGaqC,KAAAA;mBAAb,AADA,WAAW;YACX,SAAaA,MAAMC,MAAM,EAAEC,QAAQ;uBAAnC,oBAAA;wBAEUzC,UAKCiC;;;;;;;;;;gCALU;;oCAAMzC,MAAMkD,IAAI,CAAC,AAAC,GAAiB,OAAf/C,iBAAkB;wCACrD6C,QAAQA;wCACRC,UAAUA;oCACZ;;;gCAHMzC,WAAW;gCAIjB;;oCAAOA,SAASE,IAAI;;;gCACb+B;gCACP;;oCAAOA,MAAMjC,QAAQ,CAACE,IAAI;;;;;;;;gBAE9B;;;;YAEayC,KAAAA;mBAAb,AADF,GAAG;YACD,SAAaA,SAASH,MAAM,EAAEI,KAAK,EAAEH,QAAQ;uBAA7C,oBAAA;wBAQWR;;;;gCAPTN,QAAQC,GAAG,CAACY,SAAS,MAAMI,QAAQ,MAAMH;;;;;;;;;gCAEvC;;oCAAMjD,MAAMkD,IAAI,CAAC,AAAC,GAAgB,OAAd9C,eAAc,YAAU;wCAC1CgD,OAAOA;wCACPJ,QAAQA;wCACRC,UAAUA;oCACZ;;;gCAJA;;;;;;gCAKOR;gCACPN,QAAQC,GAAG,CAACK,MAAMjC,QAAQ;gCAC1B;;oCAAOiC,MAAMjC,QAAQ;;;;;;;;gBAEzB;;;;YAEa6C,KAAAA;mBAAb,SAAaA,WAAW9C,EAAE;uBAA1B,oBAAA;wBACQU,OACAT;;;;gCADAS,QAAQG,aAAaC,OAAO,CAAC;gCAClB;;oCAAMG,MAAM,AAAC,GAA0BjB,OAAxBH,eAAc,YAAa,OAAHG,KAAM;wCAC5DkB,QAAQ;wCACRI,SAAS;4CAAEC,eAAe,AAAC,UAAe,OAANb;wCAAQ;oCAC9C;;;gCAHMT,WAAW;gCAIjB;;oCAAOA,SAASE,IAAI;;;;gBACtB;;;;YAGa4C,KAAAA;mBAAb,AADA,MAAM;YACN,SAAaA,WAAWC,IAAI;uBAA5B,oBAAA;wBACQtC,OACFC;;;;gCADED,QAAQG,aAAaC,OAAO,CAAC;gCAGnC;;oCAAMG,MAAM,AAAC,GAAgB,OAAdpB,eAAc,YAAU;wCACrCqB,QAAQ;wCACRC,MAAMC,KAAKC,SAAS,CAAC2B;wCACrB1B,SAAS;4CACPC,eAAe,AAAC,UAAe,OAANb;4CACzB,gBAAgB;wCAClB;oCACF,GAAGc,IAAI,CAAC,SAACC;wCACPd,OAAOc;oCACT;;;gCATA;gCAUA;;oCAAOd;;;;gBACT;;;;WA5IWb;IA6IZ"}